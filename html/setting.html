<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/setting.css">
    <link rel="stylesheet" href="../css/common.css">
    <title>Document</title>
</head>
<body>
    <div class="container">

    </div>
</body>
</html> -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Hello MUI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="../css/mui.min.css">
    <link rel="stylesheet" href="../css/personalInformation.css">
    <style>
        html,
        body {
            background-color: #ffffff;
        }

        #password {
            background-color: #fff;
        }

        a:hover {
            text-decoration: none;
        }

        a:visited {
            text-decoration: none;
        }

        .mui-views,
        .mui-view,
        .mui-pages,
        .mui-page,
        .mui-page-content {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            background-color: #efeff4;
        }

        .mui-pages {
            top: 46px;
            height: auto;
        }

        .mui-scroll-wrapper,
        .mui-scroll {
            background-color: #efeff4;
        }

        .mui-page.mui-transitioning {
            -webkit-transition: -webkit-transform 300ms ease;
            transition: transform 300ms ease;
        }

        .mui-page-left {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }

        .mui-ios .mui-page-left {
            -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
        }

        .mui-navbar {
            position: fixed;
            right: 0;
            left: 0;
            z-index: 10;
            height: 44px;
            background-color: #f7f7f8;
        }

        .mui-navbar .mui-bar {
            position: absolute;
            background: transparent;
            text-align: center;
        }

        .mui-android .mui-navbar-inner.mui-navbar-left {
            opacity: 0;
        }

        .mui-ios .mui-navbar-left .mui-left,
        .mui-ios .mui-navbar-left .mui-center,
        .mui-ios .mui-navbar-left .mui-right {
            opacity: 0;
        }

        .mui-navbar .mui-btn-nav {
            -webkit-transition: none;
            transition: none;
            -webkit-transition-duration: .0s;
            transition-duration: .0s;
        }

        .mui-navbar .mui-bar .mui-title {
            display: inline-block;
            width: auto;
        }

        .mui-page-shadow {
            position: absolute;
            right: 100%;
            top: 0;
            width: 16px;
            height: 100%;
            z-index: -1;
            content: '';
        }

        .mui-page-shadow {
            background: -webkit-linear-gradient(left, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 10%, rgba(0, 0, 0, .01) 50%, rgba(0, 0, 0, .2) 100%);
            background: linear-gradient(to right, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 10%, rgba(0, 0, 0, .01) 50%, rgba(0, 0, 0, .2) 100%);
        }

        .mui-navbar-inner.mui-transitioning,
        .mui-navbar-inner .mui-transitioning {
            -webkit-transition: opacity 300ms ease, -webkit-transform 300ms ease;
            transition: opacity 300ms ease, transform 300ms ease;
        }

        .mui-page {
            display: none;
        }

        .mui-pages .mui-page {
            display: block;
        }


        .mui-page .mui-table-view:last-child {
            margin-bottom: 30px;
        }



        .mui-table-view span.mui-pull-right {
            color: #999;
        }

        .mui-table-view-divider {
            background-color: #efeff4;
            font-size: 14px;
        }

        .mui-table-view-divider:before,
        .mui-table-view-divider:after {
            height: 0;
        }

        .head {
            height: 40px;
        }

        #head {
            line-height: 40px;
        }

        .head-img {
            width: 40px;
            height: 40px;
        }

        #head-img1 {
            position: absolute;
            bottom: 10px;
            right: 40px;
            width: 40px;
            height: 40px;
        }

        .update {
            font-style: normal;
            color: #999999;
            margin-right: -25px;
            font-size: 15px
        }

        .mui-fullscreen {
            position: fixed;
            z-index: 20;
            background-color: #000;
        }

        .mui-ios .mui-navbar .mui-bar .mui-title {
            position: static;
        }

        /*问题反馈在setting页面单独的css*/

        #feedback .mui-popover {
            position: fixed;
        }

        #feedback .mui-table-view:last-child {
            margin-bottom: 0px;
        }

        #feedback .mui-table-view:first-child {
            margin-top: 0px;
        }

        .mui-plus.mui-plus-stream .mui-stream-hidden {
            display: none !important;
        }

        /*意见建议样式 */

        .title {
            width: 100%;
            height: 1.173333rem;
            background-color: #fff;
            line-height: 1.173333rem;
            color: #000000;
            font-size: 0.4rem;
        }

        .title div {
            width: 50%;
            line-height: 1.173333rem;
            text-align: center;
        }

        .default-style {
            border-bottom: 2px solid #EEEDED;
        }

        .title div span {
            color: #fd5a28;
        }

        .float-left {
            float: left;
        }

        .float-right {
            float: right;
        }

        .active {
            border-bottom: 2px solid #39BCFE;
            color: #39BCFE;
        }

        .clearfloat:after {
            display: block;
            clear: both;
            content: "";
            visibility: hidden;
            height: 0;
        }

        .clearfloat {
            zoom: 1;
        }

        .user-input {
            padding: .3rem;
            background-color: #fff;
        }

        /* 提交按钮 */

        .submit {
            width: 9.4rem;
            margin: .5rem auto;
            height: 1rem;
            line-height: 1rem;
            font-size: .4rem;
            color: #ffffff;
            text-align: center;
            background-color: #39BCFE;
            border-radius: .1rem;
        }

        /* 提交记录样式 */

        .every-one-content {
            background-color: #fff;
            padding: 0 .3rem;
            margin-top: .1rem;
        }

        .every-one-content div {
            font-size: .38rem;
            text-indent: 2em;
            padding: .2rem 0;
        }

        .every-one-content>p {
            font-size: .32rem;
            padding: .1rem 0;
        }
    </style>

</head>

<body class="mui-fullscreen">
    <!--页面主结构开始-->
    <div id="container">
        <div id="app" class="mui-views">
            <div class="mui-view">
                <div class="mui-navbar">
                </div>
                <div class="mui-pages">
                </div>
            </div>
        </div>
        <!--页面主结构结束-->
        <!--单页面开始-->
        <div id="setting" class="mui-page">
            <!--页面标题栏开始-->
            <div class="mui-navbar-inner mui-bar mui-bar-nav" style="background-color: #39BCFE">
                <button type="button" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left">
                    <span class="mui-icon mui-icon-left-nav" style="color: #ffffff"></span>
                </button>
                <h1 class="mui-center mui-title" style="color: #ffffff">设置</h1>
            </div>
            <!--页面标题栏结束-->
            <!--页面主内容区开始-->
            <div class="mui-page-content">
                <div class="mui-scroll-wrapper">
                    <div class="mui-scroll">
                        <ul class="mui-table-view mui-table-view-chevron">
                            <li class="mui-table-view-cell">
                                <a href="#password" class="mui-navigate-right" style="font-size: .4rem">修改密码</a>
                            </li>
                            <li class="mui-table-view-cell">
                                <a href="#advices" class="mui-navigate-right" style="font-size: .4rem">意见建议</a>
                            </li>
                            <li class="mui-table-view-cell">
                                <span class="mui-navigate-right" style="font-size: .4rem">邀请注册</span>
                            </li>
                            <li class="mui-table-view-cell" @tap="callPhone()">
                                <span class="mui-navigate-right" style="font-size: .4rem">联系客服
                                    <i class="mui-pull-right update">400-0998-058</i>
                                </span>
                            </li>
                            <li class="mui-table-view-cell">
                                <a href="#about" class="mui-navigate-right" style="font-size: .4rem">关于万国
                                    <i class="mui-pull-right update">{{version}}</i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--页面主内容区结束-->
        </div>

        <div id="about" class="mui-page">
            <div class="mui-navbar-inner mui-bar mui-bar-nav" style="background-color: #39BCFE">
                <button type="button" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left" style="color: #ffffff">
                    <span class="mui-icon mui-icon-left-nav"></span>设置
                </button>
                <h1 class="mui-center mui-title" style="color:#fff">关于万国</h1>
            </div>
            <div class="container">
                <div style="width: 5reml;text-align: center;margin: .5rem auto;margin-bottom: 0">
                    <img style="width: 2rem;" src="../img/aboutimg.png" alt="">
                    <p style="font-size: .38rem;color: #000000;font-weight: bold;margin: .1rem 0">万国汽车码头</p>
                </div>
                <div style="padding: 1.3rem .3rem;font-size: .45rem;color: #333333;text-indent:.9rem;letter-spacing:3px;line-height: .65rem;">
                    山西万国君威电子商务有限公司是专业的汽车后市场服务提供商，核心业务是汽车后市场维保服务以及汽配网络商城。山西万国君威电子商务有限公司依托山西万国汽贸园，通过对互联网和物联网技术的深入应用，提高汽车后市场服务在消费者心中的透明度，营造安全、放心的市场环境。致力于建立规范化、标准化的汽车后市场服务平台。
                </div>
                <div style="margin-top: 2rem;">
                    <p style="font-size: .42rem;text-align:center;" id="version"></p>
                    <p style="font-size: .4rem;text-align: center">山西万国君威电子商务有限公司</p>
                </div>
            </div>
        </div>
        <div id="password" class="mui-page">
            <div class="mui-navbar-inner mui-bar mui-bar-nav" style="background-color: #39BCFE">
                <button type="button" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left" style="color: #ffffff">
                    <span class="mui-icon mui-icon-left-nav"></span>设置
                </button>
                <h1 class="mui-center mui-title" style="color:#fff">修改密码</h1>
            </div>
            <div class="container">
                <div class="common-list">
                    <div style="width: 3rem">
                        <span>旧密码:</span>
                    </div>
                    <input v-model="oldpwd" type="text">
                </div>
                <div class="common-list">
                    <div style="width: 3rem">
                        <span>新密码:</span>
                    </div>
                    <input v-model="pwd" type="text">
                </div>
                <div class="common-list">
                    <div style="width: 3rem">
                        <span>确认新密码:</span>
                    </div>
                    <input v-model="rpwd" type="text">
                </div>
                <div class="submit-button" @tap="submit()">
                    确认修改
                </div>
            </div>
        </div>
        <div id="advices" class="mui-page">
            <div class="mui-navbar-inner mui-bar mui-bar-nav" style="background-color: #39BCFE">
                <button type="button" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left" style="color: #ffffff">
                    <span class="mui-icon mui-icon-left-nav"></span>设置
                </button>
                <h1 class="mui-center mui-title" style="color:#fff">意见建议</h1>
            </div>
            <div class="title clearfloat">
                <div class="float-left default-style active">
                    提问
                </div>
                <div class="float-right default-style">
                    意见建议
                </div>
            </div>
            <div id="active2">
                <div class="every-one-content">
                    <div>
                        房间爱上考虑对方就爱看圣诞节疯狂拉升的积分卡拉斯加对方快乐撒大家反馈撒大家分开了圣诞节安防科技啊速度快解放卡圣诞节疯狂
                    </div>
                    <p>
                        提交时间：2018-05-10 15:44:23
                    </p>
                </div>
            </div>
            <div id="active1" style="display: none">
                <div class="user-input">
                    <textarea style="text-indent: 2em;font-size: .38rem;padding:.1rem 0" name="" id="" cols="30" rows="10"></textarea>
                    <p style="padding: .2rem 0">留下您的意见与建议,一经采纳奖励相应积分</p>
                </div>
                <div class="submit">
                    提交
                </div>
            </div>
        </div>
    </div>
</body>
<script src="../js/flexible.js"></script>
<script src="../js/mui.min.js"></script>
<script src="../js/md5.js"></script>
<script src="../js/common.js"></script>
<script src="../js/vue.min.js"></script>
<script src="../js/mui.view.js "></script>
<script>
    var vm = new Vue({
        el: "#container",
        data: {
            version: "",
            oldpwd: "",
            pwd: "",
            rpwd: "",
            active1: true
        }
    })
    mui.init();
    //初始化单页view
    var viewApi = mui('#app').view({
        defaultPage: '#setting'
    });
    //初始化单页的区域滚动
    mui('.mui-scroll-wrapper').scroll();
    //分享操作
    var view = viewApi.view;
    (function ($) {
        //处理view的后退与webview后退
        var oldBack = $.back;
        $.back = function () {
            if (viewApi.canBack()) { //如果view可以后退，则执行view的后退
                viewApi.back();
            } else { //执行webview后退
                oldBack();
            }
        };
    })(mui);

    //获取版本号
    mui.plusReady(function () {
        plus.runtime.getProperty(plus.runtime.appid, function (wgtinfo) {
            //version属性
            vm.version = "版本：" + wgtinfo.version;
        });
    })
    //修改密码
    var pwdReg = /^(\d{8,16})?$/; //8到16位数字与字母组合
    function submit() {
        if (!vm.oldpwd) {
            toast("请输入旧密码");
        } else if (!pwdReg.test(vm.pwd)) {
            toast("密码长度为8-16位数字");
        } else if (vm.pwd != vm.rpwd) {
            toast("两次输入密码不一致");
        } else {
            var waiting = plus.nativeUI.showWaiting("加载中", {
                width: "130px",
                height: "130px"
            });

            mui.ajax(http_url + "/api.php/User/editpass", {
                data: {
                    oldpwd: vm.oldpwd,
                    pwd: vm.pwd,
                    rpwd: vm.rpwd
                },
                dataType: "json",
                type: "post",
                headers: { apitoken: c("/api.php/User/editpass") },
                timeout: 10000,
                success: function (data) {
                    if (data.status == 200) {
                        waiting.close();
                        localStorage.removeItem("user-message");
                        mui.alert(data.message, "万国提示", function () {
                            mui.openWindow({
                                url: "login.html",
                                id: "login.html",
                                extras: { change_PWD: true }
                            });
                        });
                    } else {
                        waiting.close();
                        toast(data.message);
                    }
                },
                error: function (xhr, type, errorThrown) {
                    waiting.close();
                }
            });
        }
    }
    //拨打电话
    function callPhone() {
        window.location.href = "tel:400-0998-058";
    }
</script>

</html>