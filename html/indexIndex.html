<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link href="../css/mui.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/indexIndex.css">
    <title>首页</title>
</head>

<body>
    <div id="app" class="mui-scroll-wrapper">
        <div class="mui-scroll">
            <!-- 轮播图 -->
            <div class="mui-slider">
                <div class="mui-slider-group mui-slider-loop">
                    <div class="mui-slider-item mui-slider-item-duplicate">
                        <a href="#">
                            <img src="../img/1.png" />
                        </a>
                    </div>
                    <div class="mui-slider-item">
                        <a href="#">
                            <img src="../img/1.png" />
                        </a>
                    </div>
                    <div class="mui-slider-item">
                        <a href="#">
                            <img src="../img/2.png" />
                        </a>
                    </div>
                    <div class="mui-slider-item">
                        <a href="#">
                            <img src="../img/3.png" />
                        </a>
                    </div>
                    <div class="mui-slider-item">
                        <a href="#">
                            <img src="../img/4.png" />
                        </a>
                    </div>
                    <div class="mui-slider-item mui-slider-item-duplicate">
                        <a href="#">
                            <img src="../img/4.png" />
                        </a>
                    </div>
                </div>
                <div class="mui-slider-indicator">
                    <div class="mui-indicator mui-active"></div>
                    <div class="mui-indicator"></div>
                    <div class="mui-indicator"></div>
                    <div class="mui-indicator"></div>
                </div>
            </div>
            <!--类别选项部分-->
            <div class="category">
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse8.png)">
                        <img src="../img/car.png" />
                    </div>
                    <div class="text">我要买车</div>
                </div>
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse6.png)">
                        <img src="../img/second-hand.png" />
                    </div>
                    <div class="text">我要卖车</div>
                </div>
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse2.png)">
                        <img src="../img/shoping.png" />
                    </div>
                    <div class="text">汽配商城</div>
                </div>
                <div class="every-category">
                    <div class="bgk">
                        <img src="../img/credit.png" />
                    </div>
                    <div class="text">最新活动</div>
                </div>
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse7.png)">
                        <img src="../img/car-kuaibao.png" />
                    </div>
                    <div class="text">分期计算</div>
                </div>
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse5.png)">
                        <img src="../img/automobile-center.png" />
                    </div>
                    <div class="text">保险计算</div>
                </div>
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse1.png)">
                        <img src="../img/automobile-insurance.png" />
                    </div>
                    <div class="text">汽车估价</div>
                </div>
                <div class="every-category">
                    <div class="bgk" style="background-image: url(../img/ellipse3.png)">
                        <img src="../img/llliegal.png" />
                    </div>
                    <div class="text">违章查询</div>
                </div>
            </div>
            <!-- 视频播放 -->
            <!-- <div class="video">
                <div class="text-video">
                    2017年01月01日万国电商拍卖会录像
                </div>
                <div class=play-video>
                    <div class="play-button">
                        <img src="../img/play.png" alt="">
                    </div>
                    <img src="../img/5.png" class="play" alt="">
                </div>
                <div class="video-message clearfloat">
                    1347次播放
                    <div class="video-comment-love-it float-right">
                        <img src="../img/love-it.png" alt=""> 3
                    </div>
                    <div class="video-comment-love-it float-right">
                        <img src="../img/comment.png" alt=""> 3
                    </div>
                </div>
            </div> -->
            <!-- 精品推荐 -->
            <div class="boutique-area">
                <div class="title">
                    <div class="title-left">
                        精品推荐
                    </div>
                    <div class="title-right" @tap="jump_buycar()">
                        <span>查看详情</span>
                        <span class="iconfont icon-gengduo1"></span>
                    </div>
                </div>
                <div class="boutique-message">
                    <div id="mui-scroll-wrapper" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
                        <div class="mui-scroll">
                            <div class="boutique-good" v-for="item in cars">
                                <img v-bind:src="item.pic">
                                <p>
                                    {{item.title}}
                                </p>
                                <p style="color: #f51212">￥ {{item.price}}
                                </p>
                                <p style="font-size: .3rem;">
                                    {{item.djrq}} | {{item.bxlc}} 万公里
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- 新闻部分 -->
            <div class="news-area">
                <div class="title">
                    <div class="title-left">
                        养车常识
                    </div>
                    <div class="title-right" @tap="jump_open_new_page('news.html')">
                        <span>更多</span>
                        <span class="iconfont icon-gengduo1"></span>
                    </div>
                </div>
                <div class="news-message">
                    <div class="news" v-for="item in news" @tap="jump_to_new_detail(item.id)">
                        <div class="news-icon">
                            知识
                        </div>
                        <div class="news-title">
                            {{item.title}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="all">
                <div class="car-money" @tap="jump_open_new_page('payment.html')">
                    <div class="car-money-common">
                        <img src="../img/index01.png" alt="">
                        <div class="car-money-common-text">大平台有保障</div>
                        <div class="common-button">
                            提交保证金
                        </div>
                    </div>
                    <div class="car-money-common">
                        <img src="../img/index02.png" alt="">
                        <div class="car-money-common-text">分期还款无压力</div>
                        <div class="common-button">
                            购车金融
                        </div>
                    </div>
                    <div class="car-money-common">
                        <img src="../img/index03.png" alt="">
                        <div class="car-money-common-text">车险种类介绍</div>
                        <div class="common-button">
                            万国车险
                        </div>
                    </div>
                </div>
                <!-- 商品分区头部 -->
                <div class="good-classification">
                    <img src="../img/fire.png" alt="">
                    <div style="font-size: .5rem">人气推荐</div>
                    <div class="more clearfloat">
                        <div class="float-left">
                            更多
                        </div>
                        <img src="../img/right.png" alt="">
                    </div>
                </div>
                <!-- 商品列表区域 -->
                <div class="good-area">
                    <div class="good" v-for="item in goods" v-bind:id="item.goods_id">
                        <div class="good-img" v-bind:style="{backgroundImage:'url(' + item.pic + ')'}">

                        </div>
                        <div class="good-message">
                            {{item.goods_name}}
                        </div>
                        <div class="good-price">
                            {{item.shop_price}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="out-div" id="popup">
        <div class="arrow"></div>
        <div class="popup-list">
            <span class="iconfont icon-gouwuche"></span>
            <div>购物车</div>
        </div>
        <div class="popup-list">
            <span class="iconfont  icon-single"></span>
            <div>我的订单</div>
        </div>
        <div class="popup-list">
            <span class="iconfont icon-shoucang2"></span>
            <div>我的收藏</div>
        </div>
        <!-- <div class="popup-list">
            <span class="iconfont icon-richscan_icon"></span>
            <div>扫一扫</div>
        </div> -->
    </div>
    <div id="shade" onclick="shadeHidden()">

    </div>
    <script src="../js/flexible.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/mui.min.js"></script>
    <script src="../js/md5.js"></script>
    <script src="../js/httprequest.js"></script>
    <script src="../js/vue.min.js" type="text/javascript" charset="utf-8"></script>
    <script>
        // 精品区域
        var carDOM = document.querySelector(".boutique-message");
        //新闻容器
        var newsDOM = document.querySelector(".news-message");
        //商品容器
        var goodsDOM = document.querySelector(".good-area");
        var good_list = new Vue({
            el: "#app",
            data: {
                cars: [],
                goods: [],
                news: []
            }
        })

        var password = hex_md5('/api.php/Index/index' + http_time + 'wanguo.net!@#');
        mui.ajax(http_url + '/api.php/Index/index', {
            dataType: 'json',
            type: 'get',
            timeout: 10000,
            headers: { 'Content-Type': 'application/json', "apitoken": password, },
            success: function (data) {
                good_list.cars = data.data.car;
                good_list.news = data.data.news;
                good_list.goods = data.data.goods;
            },
            error: function (xhr, type, errorThrown) {
                //异常处理；
                console.log(type);
            }
        });

        function plusReady() {
            parent = plus.webview.currentWebview().parent();                //获取父窗口
        }
        if (window.plus) {
            plusReady();
        } else {
            document.addEventListener('plusready', plusReady, false);
        }
        function captureImage() {
            mui.openWindow({
                url: "QRCode.html",
                id: "QRCode.html"
            })
        }
        // 打开弹出框并且打开遮罩
        function openmore() {
            document.getElementById("popup").style.display = "block";
            document.getElementById("shade").style.display = "block";
        }
        //隐藏弹出框遮罩
        function shadeHidden() {
            document.getElementById("popup").style.display = "none";
            document.getElementById("shade").style.display = "none";
        }
        function ck(message) {
            plus.nativeUI.toast(message, { verticalAlign: "center" });
        }
        mui.plusReady(function () {

        })
        // 初始化轮播图
        var gallery = mui('.mui-slider');
        gallery.slider({
            interval: 2000//自动轮播周期，若为0则不自动播放，默认为0；
        });
        mui('.mui-scroll-wrapper').scroll({
            indicators: false,
            deceleration: 0.0005,//flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006
        });
        mui("#mui-scroll-wrapper").scroll({
            scrollY: false,
            scrollX: true,
            indicators: false,
            deceleration: 0.0005,
        })
        // 获取分类
        var activity = document.getElementsByClassName("every-category");
        for (var i = 0; i < activity.length; i++) {
            activity[i].index = i;
        }
        var goodDetailPage = null;
        //给每个商品添加点击事件跳转到商品详情页
        mui(".good-area").on("tap", ".good", function () {
            var id = this.id;
            if (!goodDetailPage) {
                goodDetailPage = plus.webview.getWebviewById("goodDetail.html");

            }
            mui.fire(goodDetailPage, 'goodId', { id: id });
            mui.openWindow({
                id: "goodDetail.html",
            })
        })
        //点击跳转
        function jump_buycar() {
            parent.evalJS("changeView('buyCart.html')")
        }
        //点击跳转到新的页面
        function jump_open_new_page(url) {
            mui.openWindow({
                url: url,
                id: url,
            })
        }
        //弹出框中的点击跳转
        mui("#popup").on("tap", ".popup-list", function () {
            var url;
            if (this.innerHTML.indexOf("我的订单") >= 0) {
                url = "order.html";
            } else if (this.innerHTML.indexOf("购物车") >= 0) {
                url = "shoppingCart.html";
            } else {
                url = "myCollection.html"
            }
            shadeHidden();
            mui.openWindow({
                url: url,
                id: url
            })
        })
        //父窗口
        var parent;
        mui(".category").on("tap", ".every-category", function () {
            console.log("dianji")
            if (this.index == 0) {
                parent.evalJS("changeView('buyCart.html')")
            } else if (this.index == 1) {
                mui.openWindow({
                    url: "sellCart.html",
                    id: "sellCart.html",
                })
            } else if (this.index == 2) {
                parent.evalJS("changeView('shoppingMall.html')")
            } else if (this.index == 3) {
                mui.openWindow({
                    url: "news.html",
                    id: "news.html",
                })
            } else {
                ck("功能尚未开通，敬请期待！");
            }
        })
        //跳转到新闻详情页
        function jump_to_new_detail(id) {
            mui.openWindow({
                url: "newsMessage.html",
                id: "newsMessage.html",
                extras: {
                    message: id //扩展参数
                }
            })
        }
    </script>
</body>

</html>